{% extends 'layout.html' %}

{% block title %}Home{% endblock %}

{% block content %}


<div class="container">
    <br>
    <br>
    <div class="alert alert-success" role="alert"> Hello {{ session['NAME'] }} </div><br>

    <form action="{{ url_for('home') }}" method="POST">

        <div class="mt-3">
            <label for="text" class="form-label">Enter the name of the person : </label><br><br>
            <input type="text" class="form-control" id="text" name="text" placeholder="Salman Khan"  maxlength = "30" required><br>
        </div>
        <button type="submit" class="mt-3 btn btn-primary" style="border-radius: 15px;" >Search and show the results</button>

    </form>

    <br>
    <br>
    <strong>{{msg}}</strong>
    {% if request.method == "POST" and result %}
    <img src="static\graphs\\{{search_query}}.png">
    <br>
    <br>
    <br>
    <br>
    <h3>Results</h3>
    <br>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Tweet</th>
                <th scope="col">Prediction</th>
                <th scope="col">Report</th>
            </tr>
        </thead>
        <tbody>
            <p>{% for i in range(result|length) %}
                <tr>
                    <td scope="row">{{i + 1}}</td>
                    <td>{{Tweets[i]}}</td>
                    <td>
                        {% if result[i] == 'none' %}

                        Non Bullying Tweet

                        {% elif result[i] == 'racism' %}

                        Racism Tweet

                        {% elif result[i] == 'sexism' %}

                        Sexism Tweet

                        {% else %}

                        Other hate speech tweet

                        {% endif %}

                    </td>

                    <td>
                        {% if ( result[i] == 'racism'  or  result[i] == 'sexism'   or  result[i] == 'other' ) %}

                        <form action="{{ url_for('send_report') }}" method='POST'>
                            <input type="hidden" id="search_query" name="search_query" value="{{search_query}}">
                            <input type="hidden" id="i" name="i" value="{{i}}">
                            <input type="submit" class="btn btn-danger" value='Report'>

                        </form>

                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
        </tbody>
    </table>




    {% endif %}

    <br><br>

   

</div>


{% endblock %}